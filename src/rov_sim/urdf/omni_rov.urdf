<?xml version="1.0"?>
<robot name="omni_rov">

  <material name="blue"><color rgba="0 0 0.8 1"/></material>
  <material name="black"><color rgba="0 0.6 0 1"/></material>

  <!-- Base link -->
  <link name="base_link">
    <visual>
      <geometry><box size="0.4 0.4 0.3"/></geometry>
      <material name="blue"/>
    </visual>
    <collision>
      <geometry><box size="0.4 0.4 0.3"/></geometry>
    </collision>
    <inertial>
      <mass value="48.0"/>
      <inertia ixx="1.35" ixy="0" ixz="0" iyy="1.725" iyz="0" izz="1.725"/>
    </inertial>
  </link>

  <link name="t0_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t0_joint" type="continuous">
    <parent link="base_link"/><child link="t0_link"/>
    <origin xyz="0 0.25 0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
  </joint>

  <link name="t1_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t1_joint" type="continuous">
    <parent link="base_link"/><child link="t1_link"/>
    <origin xyz="0 -0.25 0" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
  </joint>

  <link name="t2_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t2_joint" type="continuous">
    <parent link="base_link"/><child link="t2_link"/>
    <origin xyz="0.25 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
  </joint>

  <link name="t3_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t3_joint" type="continuous">
    <parent link="base_link"/><child link="t3_link"/>
    <origin xyz="-0.25 0 0" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
  </joint>

  <link name="t4_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t4_joint" type="continuous">
    <parent link="base_link"/><child link="t4_link"/>
    <origin xyz="0.25 -0.25 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <link name="t5_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t5_joint" type="continuous">
    <parent link="base_link"/><child link="t5_link"/>
    <origin xyz="0.25 0.25 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <link name="t6_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t6_joint" type="continuous">
    <parent link="base_link"/><child link="t6_link"/>
    <origin xyz="-0.25 0.25 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <link name="t7_link">
    <visual><geometry><cylinder radius="0.03" length="0.08"/></geometry><material name="black"/></visual>
    <inertial><mass value="0.5"/><inertia ixx="0.0005" ixy="0" ixz="0" iyy="0.0005" iyz="0" izz="0.0005"/></inertial>
  </link>
  <joint name="t7_joint" type="continuous">
    <parent link="base_link"/><child link="t7_link"/>
    <origin xyz="-0.25 -0.25 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Gazebo plugins -->
  <gazebo>
    <!-- Joint state publisher -->
    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher"/>

    <!-- Hydrodynamics -->
    <plugin filename="gz-sim-hydrodynamics-system" name="gz::sim::systems::Hydrodynamics">
      <link_name>base_link</link_name>

      <!--Linear Dampening-->
      <xUabsU>-1.5</xUabsU>
      <yVabsV>-1.5</yVabsV>
      <zWabsW>-1.0</zWabsW>

      <!-- Quadratic Dampening -->
      <xU>-0.8</xU>
      <yV>-0.8</yV>
      <zW>-0.5</zW>

      <!--Linear rotation Dampening-->
      <kPabsP>-5</kPabsP>
      <mQabsQ>-5</mQabsQ>
      <nRabsR>-5</nRabsR>

      <!-- Quadratic rotation Dampening -->
      <kP>-3</kP>
      <mQ>-3</mQ>
      <nR>-3</nR>

    </plugin>

    <!-- Thrusters -->
    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t0_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t0</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <!-- Repeat for t1-t7 with same numbers -->
   <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t1_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t1</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t2_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t2</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t3_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t3</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t4_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t4</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t5_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t5</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t6_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t6</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>

    <plugin filename="gz-sim-thruster-system" name="gz::sim::systems::Thruster">
      <joint_name>t7_joint</joint_name>
      <namespace>rov/</namespace>
      <topic>/thruster/t7</topic>
      <thrust_coefficient>0.2</thrust_coefficient>
      <fluid_density>1000</fluid_density>
      <propeller_diameter>0.08</propeller_diameter>
      <velocity_control>false</velocity_control>
    </plugin>
  </gazebo>
  <gazebo reference="base_link">
    <sensor name="imu_sensor" type="imu">
      <always_on>1</always_on>
      <update_rate>100</update_rate>
      <visualize>true</visualize>
      <topic>imu</topic>
    </sensor>

    <sensor name="depth_sensor" type="air_pressure">
      <always_on>1</always_on>
      <update_rate>50</update_rate>
      <visualize>true</visualize>
      <topic>pressure</topic>
    </sensor>
    
  </gazebo>

</robot>
